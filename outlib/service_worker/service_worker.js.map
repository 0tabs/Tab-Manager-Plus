{"version":3,"sources":["../../lib/service_worker/service_worker.js"],"names":["browser","sidebarAction","open","openSidebar","setupContextMenus","setupPopup","setupTabListeners","setupWindowListeners","updateTabCountDebounce","setTimeout","cleanupDebounce","setup","importScripts","chrome","globalTabsActive","globalDisplayInfo","runtime","onStartup","addListener","console","log","onSuspend","debounce","updateTabCount","cleanUp","commands","onCommand","handleCommands","onMessage","handleMessages","windows","getAll","populate","setLocalStorage","length","sort","a","b","id","i","windowActive","setInterval"],"mappings":"AAAA;;;uDAmCA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aACOA,QAAQC,aAAR,CAAsBC,IAAtB,EADP;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,E;;iBAAeC,W;;;;;;uDAIf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aACOC,mBADP;;AAAA;AAAA;AAAA,aAEOC,YAFP;;AAAA;AAAA;AAAA,aAGOC,mBAHP;;AAAA;AAAA;AAAA,aAIOC,sBAJP;;AAAA;;AAMCC;;AAEAC,iBAAWC,eAAX,EAA4B,IAA5B;;AARD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,E;;iBAAeC,K;;;;;;;AArCfC,cAAc,gCAAd;AACAA,cAAc,sCAAd;;AAEAA,cAAc,uBAAd;AACAA,cAAc,qBAAd;;AAEAA,cAAc,yBAAd;AACAA,cAAc,yBAAd;AACAA,cAAc,sBAAd;AACAA,cAAc,0BAAd;;AAEAA,cAAc,uBAAd;AACAA,cAAc,cAAd;;AAEA,IAAIZ,UAAUA,WAAWa,MAAzB;AACA,IAAIC,mBAAmB,EAAvB;AACA,IAAIC,oBAAoB,EAAxB;;AAEAf,QAAQgB,OAAR,CAAgBC,SAAhB,CAA0BC,WAA1B,2CACC;AAAA;AAAA;AAAA;AAAA;AACCC,aAAQC,GAAR,CAAY,aAAZ;;AADD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,CADD;;AAMApB,QAAQgB,OAAR,CAAgBK,SAAhB,CAA0BH,WAA1B,2CACC;AAAA;AAAA;AAAA;AAAA;AACCC,aAAQC,GAAR,CAAY,aAAZ;;AADD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,CADD;;AAMA,IAAIZ,yBAAyBc,SAASC,cAAT,EAAyB,GAAzB,CAA7B;AACA,IAAIb,kBAAkBY,SAASE,OAAT,EAAkB,GAAlB,CAAtB;;AAiBAxB,QAAQyB,QAAR,CAAiBC,SAAjB,CAA2BR,WAA3B,CAAuCS,cAAvC;AACA3B,QAAQgB,OAAR,CAAgBY,SAAhB,CAA0BV,WAA1B,CAAsCW,cAAtC;;AAEA,0CAAC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YACoB7B,QAAQ8B,OAAR,CAAgBC,MAAhB,CAAuB,EAAEC,UAAU,IAAZ,EAAvB,CADpB;;AAAA;AACIF,YADJ;AAAA;AAAA,YAEMG,gBAAgB,WAAhB,EAA6B,EAA7B,CAFN;;AAAA;AAAA,WAGI,CAAC,CAACH,OAAF,IAAaA,QAAQI,MAAR,GAAiB,CAHlC;AAAA;AAAA;AAAA;;AAICJ,aAAQK,IAAR,CAAa,UAAUC,CAAV,EAAaC,CAAb,EAAgB;AAC5B,UAAID,EAAEE,EAAF,GAAOD,EAAEC,EAAb,EAAiB,OAAO,CAAP;AACjB,UAAIF,EAAEE,EAAF,GAAOD,EAAEC,EAAb,EAAiB,OAAO,CAAC,CAAR;AACjB,aAAO,CAAP;AACA,MAJD;AAKSC,MATV,GASc,CATd;;AAAA;AAAA,WASiBA,IAAIT,QAAQI,MAT7B;AAAA;AAAA;AAAA;;AAAA,SAUO,CAACJ,QAAQS,CAAR,EAAWD,EAVnB;AAAA;AAAA;AAAA;;AAAA;AAAA,YAU6BE,aAAaV,QAAQS,CAAR,EAAWD,EAAxB,CAV7B;;AAAA;AASqCC,QATrC;AAAA;AAAA;;AAAA;AAWE;;AAXF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,CAAD;;AAeAE,YAAY9B,KAAZ,EAAmB,MAAnB;;AAEAA","file":"service_worker.js","sourcesContent":["\"use strict\";\n\nimportScripts('../../vendor/babel-polyfill.js');\nimportScripts('../../vendor/browser-polyfill.min.js');\n\nimportScripts('../helpers/storage.js');\nimportScripts('../helpers/utils.js');\n\nimportScripts('./background/actions.js');\nimportScripts('./background/windows.js');\nimportScripts('./background/tabs.js');\nimportScripts('./background/tracking.js');\n\nimportScripts('./ui/context_menus.js');\nimportScripts('./ui/open.js');\n\nvar browser = browser || chrome;\nvar globalTabsActive = [];\nvar globalDisplayInfo = [];\n\nbrowser.runtime.onStartup.addListener(\n\tasync function () {\n\t\tconsole.log(\" ON STARTUP\");\n\t}\n);\n\nbrowser.runtime.onSuspend.addListener(\n\tasync function () {\n\t\tconsole.log(\" ON SUSPEND\");\n\t}\n);\n\nvar updateTabCountDebounce = debounce(updateTabCount, 250);\nvar cleanupDebounce = debounce(cleanUp, 500);\n\nasync function openSidebar() {\n\tawait browser.sidebarAction.open();\n}\n\nasync function setup() {\n\tawait setupContextMenus();\n\tawait setupPopup();\n\tawait setupTabListeners();\n\tawait setupWindowListeners();\n\n\tupdateTabCountDebounce();\n\n\tsetTimeout(cleanupDebounce, 2500);\n}\n\nbrowser.commands.onCommand.addListener(handleCommands);\nbrowser.runtime.onMessage.addListener(handleMessages);\n\n(async function () {\n\tvar windows = await browser.windows.getAll({ populate: true });\n\tawait setLocalStorage(\"windowAge\", []);\n\tif (!!windows && windows.length > 0) {\n\t\twindows.sort(function (a, b) {\n\t\t\tif (a.id < b.id) return 1;\n\t\t\tif (a.id > b.id) return -1;\n\t\t\treturn 0;\n\t\t});\n\t\tfor (var i = 0; i < windows.length; i++) {\n\t\t\tif (!!windows[i].id) await windowActive(windows[i].id);\n\t\t};\n\t}\n})();\n\nsetInterval(setup, 300000);\n\nsetup();"]}