{"version":3,"sources":["../../../lib/service_worker/background/actions.js"],"names":["windowId","color","getLocalStorage","colors","setLocalStorage","updateWindowHash","browser","runtime","sendMessage","command","window_ids","setWindowColor","name","names","setWindowName","windows","get","populate","window","hash","hashcode","hashes","chrome","handleMessages","request","sender","sendResponse","setupPopup","updateTabCount","discardTabs","tabs","moveTabsToWindow","window_id","focusOnTabAndWindow","tab","focusOnTabAndWindowDelayed","focusOnWindow","focusOnWindowDelayed","createWindowWithTabs","createWindowWithSessionTabs","tab_id","closeTabs","handleCommands","globalTabsActive","length"],"mappings":"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","file":"actions.js","sourcesContent":["ï»¿var browser = browser || chrome;\r\n\r\nfunction handleMessages(request, sender, sendResponse) {\r\n\tswitch (request.command) {\r\n\t\tcase \"reload_popup_controls\":\r\n\t\t\tsetupPopup();\r\n\t\t\tbreak;\r\n\t\tcase \"update_tab_count\":\r\n\t\t\tupdateTabCount();\r\n\t\t\tbreak;\r\n\t\tcase \"discard_tabs\":\r\n\t\t\tdiscardTabs(request.tabs);\r\n\t\t\tbreak;\r\n\t\tcase \"move_tabs_to_window\":\r\n\t\t\tmoveTabsToWindow(request.window_id, request.tabs);\r\n\t\t\tbreak;\r\n\t\tcase \"focus_on_tab_and_window\":\r\n\t\t\tfocusOnTabAndWindow(request.tab);\r\n\t\t\tbreak;\r\n\t\tcase \"focus_on_tab_and_window_delayed\":\r\n\t\t\tfocusOnTabAndWindowDelayed(request.tab);\r\n\t\t\tbreak;\r\n\t\tcase \"focus_on_window\":\r\n\t\t\tfocusOnWindow(request.window_id);\r\n\t\t\tbreak;\r\n\t\tcase \"focus_on_window_delayed\":\r\n\t\t\tfocusOnWindowDelayed(request.window_id);\r\n\t\t\tbreak;\r\n\t\tcase \"set_window_color\":\r\n\t\t\tsetWindowColor(request.window_id, request.color);\r\n\t\t\tbreak;\r\n\t\tcase \"set_window_name\":\r\n\t\t\tsetWindowName(request.window_id, request.name);\r\n\t\t\tbreak;\r\n\t\tcase \"create_window_with_tabs\":\r\n\t\t\tcreateWindowWithTabs(request.tabs);\r\n\t\t\tbreak;\r\n\t\tcase \"create_window_with_session_tabs\":\r\n\t\t\tcreateWindowWithSessionTabs(request.window, request.tab_id);\r\n\t\t\tbreak;\r\n\t\tcase \"close_tabs\":\r\n\t\t\tcloseTabs(request.tabs);\r\n\t\t\tbreak;\r\n\t}\r\n}\r\n\r\nfunction handleCommands(command) {\r\n\tif (command == \"switch_to_previous_active_tab\") {\r\n\t\tif (!!globalTabsActive && globalTabsActive.length > 1) {\r\n\t\t\tfocusOnTabAndWindow(globalTabsActive[globalTabsActive.length - 2]);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nasync function setWindowColor(windowId, color) {\r\n\tvar colors = await getLocalStorage(\"windowColors\", {});\r\n\tif (typeof colors !== 'object') colors = {};\r\n\tcolors[windowId] = color;\r\n\tawait setLocalStorage(\"windowColors\", colors);\r\n\tawait updateWindowHash(windowId);\r\n\tbrowser.runtime.sendMessage({\r\n\t\tcommand: \"refresh_windows\",\r\n\t\twindow_ids: [windowId]\r\n\t});\r\n}\r\n\r\nasync function setWindowName(windowId, name) {\r\n\tvar names = await getLocalStorage(\"windowNames\", {});\r\n\tif (typeof names !== 'object') names = {};\r\n\tnames[windowId] = name;\r\n\tawait setLocalStorage(\"windowNames\", names);\r\n\tawait updateWindowHash(windowId);\r\n\tbrowser.runtime.sendMessage({\r\n\t\tcommand: \"refresh_windows\",\r\n\t\twindow_ids: [windowId]\r\n\t});\r\n}\r\n\r\nasync function updateWindowHash(windowId) {\r\n\tvar window = await browser.windows.get(windowId, {populate: true});\r\n\tvar hash = hashcode(window);\r\n\tvar hashes = await getLocalStorage(\"windowHashes\", {});\r\n\thashes[windowId] = hash;\r\n\tawait setLocalStorage(\"windowHashes\", hashes);\r\n}"]}