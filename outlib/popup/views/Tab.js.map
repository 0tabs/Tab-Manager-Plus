{"version":3,"sources":["../../../lib/popup/views/Tab.jsx"],"names":["Tab","props","state","favIcon","dragFavIcon","hovered","onHover","bind","onHoverOut","onMouseDown","click","dragStart","dragOver","dragOut","drop","resolveFavIconUrl","checkSettings","tabRef","React","createRef","children","layout","push","tab","id","pinned","highlighted","selected","backgroundImage","title","tabDom","className","hidden","mutedInfo","muted","audible","discarded","incognito","draggingOver","searchActive","style","onClick","onMouseEnter","onMouseOut","ref","draggable","e","setState","hover","hoverHandler","button","stopProp","tabId","windowId","window","middleClick","nativeEvent","metaKey","altKey","shiftKey","ctrlKey","preventDefault","selectTo","select","navigator","userAgent","search","browser","runtime","sendMessage","command","inPopup","close","drag","dragFavicon","dataTransfer","setData","url","before","offsetY","ReactDOM","findDOMNode","clientHeight","offsetX","clientWidth","forceUpdate","parentUpdate","image","chrome","encodeURIComponent","Date","now","indexOf","favIconUrl","favIcons","iconUrl","iconName","length","slice","match","stopPropagation","Component"],"mappings":"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","file":"Tab.js","sourcesContent":["\"use strict\";\n\nclass Tab extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tfavIcon: \"\",\n\t\t\tdragFavIcon: \"\",\n\t\t\thovered: false\n\t\t};\n\n\t\tthis.onHover = this.onHover.bind(this);\n\t\tthis.onHoverOut = this.onHoverOut.bind(this);\n\t\tthis.onMouseDown = this.onMouseDown.bind(this);\n\t\tthis.click = this.click.bind(this);\n\t\tthis.dragStart = this.dragStart.bind(this);\n\t\tthis.dragOver = this.dragOver.bind(this);\n\t\tthis.dragOut = this.dragOut.bind(this);\n\t\tthis.drop = this.drop.bind(this);\n\t\tthis.resolveFavIconUrl = this.resolveFavIconUrl.bind(this);\n\t\tthis.checkSettings = this.checkSettings.bind(this);\n\n\t\tthis.tabRef = React.createRef();\n\t}\n\n\tasync componentDidMount() {\n\t\tawait this.checkSettings();\n\t}\n\n\tasync checkSettings() {\n\t\tawait this.resolveFavIconUrl();\n\t}\n\n\trender() {\n\t\tvar children = [];\n\t\tif (this.props.layout == \"vertical\") {\n\t\t\tchildren.push(\n\t\t\t\t<div key={\"tab-pinned-\" + this.props.tab.id} className={\"tab-pinned \" + (!this.props.tab.pinned ? \"hidden\" : \"\")}>\n\t\t\t\t\tPinned\n\t\t\t\t</div>\n\t\t\t);\n\t\t\tchildren.push(\n\t\t\t\t<div key={\"tab-highlighted-\" + this.props.tab.id} className={\"tab-highlighted \" + (!this.props.tab.highlighted ? \"hidden\" : \"\")}>\n\t\t\t\t\tActive\n\t\t\t\t</div>\n\t\t\t);\n\t\t\tchildren.push(\n\t\t\t\t<div key={\"tab-selected-\" + this.props.tab.id} className={\"tab-selected \" + (!this.props.selected ? \"hidden\" : \"\")}>\n\t\t\t\t\tSelected\n\t\t\t\t</div>\n\t\t\t);\n\t\t\tchildren.push(\n\t\t\t\t<div\n\t\t\t\t\tkey={\"tab-icon-\" + this.props.tab.id}\n\t\t\t\t\tclassName=\"iconoverlay \"\n\t\t\t\t\tstyle={{\n\t\t\t\t\t\tbackgroundImage: \"url(\" + this.state.favIcon + \")\"\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t);\n\t\t\tchildren.push(\n\t\t\t\t<div key={\"tab-title-\" + this.props.tab.id} className=\"tabtitle\">\n\t\t\t\t\t{this.props.tab.title || \"\"}\n\t\t\t\t</div>\n\t\t\t);\n\t\t}\n\n\t\tvar tabDom = {\n\t\t\tclassName:\n\t\t\t\t\"icon tab \" +\n\t\t\t\t(this.props.selected ? \"selected \" : \"\") +\n\t\t\t\t(this.props.tab.pinned ? \"pinned \" : \"\") +\n\t\t\t\t(this.props.tab.highlighted ? \"highlighted \" : \"\") +\n\t\t\t\t(this.props.hidden ? \"hidden \" : \"\") +\n\t\t\t\t((this.props.tab.mutedInfo && this.props.tab.mutedInfo.muted) ? \"muted \" : \"\") +\n\t\t\t\t(this.props.tab.audible ? \"audible \" : \"\") +\n\t\t\t\t(this.props.tab.discarded ? \"discarded \" : \"\") +\n\t\t\t\t(this.props.layout == \"vertical\" ? \"full \" : \"\") +\n\t\t\t\t(this.props.tab.incognito ? \"incognito \" : \"\") +\n\t\t\t\t(this.state.draggingOver || \"\") +\n\t\t\t\t(this.props.searchActive ? \"search-active \" : \"\") +\n\t\t\t\t\" tab-\" +\n\t\t\t\tthis.props.tab.id +\n\t\t\t\t\" \" +\n\t\t\t\t(this.props.layout == \"vertical\" ? \"vertical \" : \"blocks \"),\n\t\t\tstyle:\n\t\t\t\t(this.props.layout == \"vertical\"\n\t\t\t\t\t? { }\n\t\t\t\t\t: { backgroundImage: \"url(\" + this.state.favIcon + \")\" }\n\t\t\t\t)\n\t\t\t,\n\t\t\tid: this.props.id,\n\t\t\ttitle: this.props.tab.title,\n\t\t\tonClick: this.click,\n\t\t\tonMouseDown: this.onMouseDown,\n\t\t\tonMouseEnter: this.onHover,\n\t\t\tonMouseOut: this.onHoverOut,\n\t\t\tref: this.tabRef\n\t\t};\n\n\t\tif (!!this.props.draggable) {\n\t\t\ttabDom[\"onDragStart\"] = this.dragStart;\n\t\t\ttabDom[\"onDragOver\"] = this.dragOver;\n\t\t\ttabDom[\"onDragLeave\"] = this.dragOut;\n\t\t\ttabDom[\"onDrop\"] = this.drop;\n\t\t\ttabDom[\"draggable\"] = \"true\";\n\t\t}\n\n\t\treturn (\n\t\t\t<div {...tabDom}>\n\t\t\t\t{children}\n\t\t\t\t<div className=\"limiter\" />\n\t\t\t</div>\n\t\t);\n\t}\n\tonHover(e) {\n\t\tthis.setState({hover: true});\n\t\tthis.props.hoverHandler(this.props.tab);\n\t}\n\tonHoverOut(e) {\n\t\tthis.setState({hover: false});\n\t}\n\tonMouseDown(e) {\n\t\tif (e.button === 0) return;\n\t\tif (!this.props.draggable) return;\n\t\tthis.click(e);\n\t}\n\tasync click(e) {\n\t\tthis.stopProp(e);\n\n\t\tvar tabId = this.props.tab.id;\n\t\tvar windowId = this.props.window.id;\n\n\t\tif (e.button === 1) {\n\t\t\tthis.props.middleClick(tabId);\n\t\t} else if (e.button === 2 || e.nativeEvent.metaKey || e.nativeEvent.altKey || e.nativeEvent.shiftKey || e.nativeEvent.ctrlKey) {\n\t\t\te.preventDefault();\n\t\t\tif (e.button === 2 && (e.nativeEvent.metaKey || e.nativeEvent.altKey || e.nativeEvent.shiftKey || e.nativeEvent.ctrlKey)) {\n\t\t\t\tthis.props.selectTo(tabId);\n\t\t\t} else {\n\t\t\t\tthis.props.select(tabId);\n\t\t\t}\n\t\t} else {\n\t\t\tif (!!this.props.click) {\n\t\t\t\tthis.props.click(e, this.props.tab.id);\n\t\t\t} else {\n\t\t\t\tif (navigator.userAgent.search(\"Firefox\") > -1) {\n\t\t\t\t\tbrowser.runtime.sendMessage({\n\t\t\t\t\t\tcommand: \"focus_on_tab_and_window_delayed\",\n\t\t\t\t\t\ttab: {id: tabId, windowId: windowId}\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tbrowser.runtime.sendMessage({\n\t\t\t\t\t\tcommand: \"focus_on_tab_and_window\",\n\t\t\t\t\t\ttab: {id: tabId, windowId: windowId}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (!!window.inPopup) window.close();\n\t\t}\n\t\treturn false;\n\t}\n\tdragStart(e) {\n\t\tif (!this.props.draggable) return false;\n\t\tif (!this.props.drag) return false;\n\n\t\tthis.state.dragFavIcon = \"\";\n\t\tthis.props.dragFavicon(this.state.favIcon);\n\t\te.dataTransfer.setData(\"Text\", this.props.tab.id);\n\t\te.dataTransfer.setData(\"text/uri-list\", this.props.tab.url || \"\");\n\t\tthis.props.drag(e, this.props.tab.id);\n\t}\n\tdragOver(e) {\n\t\tif (!this.props.draggable) return false;\n\t\tif (!this.props.drag) return false;\n\n\t\tthis.state.dragFavIcon = this.props.dragFavicon();\n\n\t\tvar before = this.state.draggingOver;\n\t\tif (this.props.layout == \"vertical\") {\n\t\t\tthis.state.draggingOver = e.nativeEvent.offsetY > ReactDOM.findDOMNode(this).clientHeight / 2 ? \"bottom\" : \"top\";\n\t\t} else {\n\t\t\tthis.state.draggingOver = e.nativeEvent.offsetX > ReactDOM.findDOMNode(this).clientWidth / 2 ? \"right\" : \"left\";\n\t\t}\n\t\tif (before != this.state.draggingOver) {\n\t\t\tthis.forceUpdate();\n\t\t\tthis.props.parentUpdate();\n\t\t}\n\t}\n\tdragOut() {\n\t\tif (!this.props.draggable) return false;\n\t\tif (!this.props.drag) return;\n\t\tthis.state.dragFavIcon = \"\";\n\t\tdelete this.state.draggingOver;\n\t\tthis.forceUpdate();\n\t\tthis.props.parentUpdate();\n\t}\n\tdrop(e) {\n\t\tif (!this.props.draggable) return false;\n\t\tif (!this.props.drag) return false;\n\t\tif (!this.props.drop) return;\n\n\t\tthis.state.dragFavIcon = \"\";\n\t\tthis.stopProp(e);\n\t\tvar before = this.state.draggingOver == \"top\" || this.state.draggingOver == \"left\";\n\t\tdelete this.state.draggingOver;\n\n\t\tthis.props.drop(this.props.tab.id, before);\n\t\tthis.forceUpdate();\n\t\tthis.props.parentUpdate();\n\t}\n\tasync resolveFavIconUrl() {\n\t\tvar image;\n\t\t// firefox screenshots; needs <all_urls>\n\t\t// if(!!browser.tabs.captureTab) {\n\t\t// \tconsole.log(\"tabs captureTab\");\n\t\t// \timage = await browser.tabs.captureTab(this.props.tab.id);\n\t\t// \timage = \"url(\" + image + \")\";\n\t\t// }else\n\t\tif (!!this.props.tab.url && navigator.userAgent.search(\"Firefox\") == -1) {\n\t\t\timage = \"chrome-extension://\" + chrome.runtime.id + \"/_favicon/?pageUrl=\" + encodeURIComponent(this.props.tab.url) + \"&size=64&\" + Date.now();\n\t\t} else if (!!this.props.tab.url && this.props.tab.url.indexOf(\"chrome://\") !== 0 && this.props.tab.url.indexOf(\"about:\") !== 0) {\n\t\t\t// chrome screenshots / only for active tabs; needs <all_urls>\n\t\t\t// if(!!browser.tabs.captureVisibleTab && this.props.tab.highlighted) {\n\t\t\t// \tconsole.log(\"tabsCapture\");\n\t\t\t// \ttry {\n\t\t\t// \t\timage = await browser.tabs.captureVisibleTab( this.props.window.id, {} );\n\t\t\t// \t\t//console.log(image);\n\t\t\t// \t} catch ( e ) {\n\t\t\t// \t\tconsole.log(e.message);\n\t\t\t// \t}\n\t\t\t// \timage = \"url(\" + image + \")\";\n\t\t\t// }else{\n\t\t\timage = this.props.tab.favIconUrl ? \"\" + this.props.tab.favIconUrl + \"\" : \"\";\n\t\t\t//}\n\t\t} else {\n\t\t\tvar favIcons = [\"bookmarks\", \"chrome\", \"crashes\", \"downloads\", \"extensions\", \"flags\", \"history\", \"settings\"];\n\t\t\tvar iconUrl = this.props.tab.url || \"\";\n\t\t\tvar iconName = \"\";\n\t\t\tif (iconUrl.length > 9) iconName = iconUrl.slice(9).match(/^\\w+/g);\n\t\t\timage = !iconName || favIcons.indexOf(iconName[0]) < 0 ? \"\" : \"../images/chrome/\" + iconName[0] + \".png\";\n\t\t}\n\t\tthis.setState({\n\t\t\tfavIcon: image\n\t\t});\n\t}\n\tstopProp(e) {\n\t\tif(e && e.nativeEvent) {\n\t\t\te.nativeEvent.preventDefault();\n\t\t\te.nativeEvent.stopPropagation();\n\t\t}\n\t\tif(e && e.preventDefault) {\n\t\t\te.preventDefault();\n\t\t\te.stopPropagation();\n\t\t}\n\t}\n}\n"]}