{"version":3,"sources":["../../../lib/popup/views/Window.jsx"],"names":["Window","props","state","colorActive","windowTitles","color","name","tabs","hover","addTab","bind","changeColors","changeName","checkKey","closePopup","close","colors","dragOver","dragLeave","drop","maximize","minimize","save","stop","windowClick","selectToFromTab","hoverWindow","hoverWindowOut","checkSettings","getLocalStorage","window","id","titlePreface","names","setLocalStorage","setState","_this","hideWindow","titleAdded","tabsperrow","layout","indexOf","Math","ceil","sqrt","length","map","tab","isHidden","hiddenTabs","filterTabs","isSelected","selection","tabMiddleClick","hoverHandler","searchActive","select","drag","dropWindow","dragFavicon","forceUpdate","tabactions","push","sessionsFeature","hoverIcon","topEntries","join","unshift","i","url","URL","protocol","hostname","pathname","title","replace","regex_var","RegExp","split","pop","children","shift","z","j","focused","lastOpenWindow","incognito","e","stopProp","browser","create","windowId","nativeEvent","preventDefault","distance","closestTab","closestRef","tabRef","refs","current","tabRect","getBoundingClientRect","x","clientX","y","clientY","dx","dy","d","before","boundingRect","top","left","keyCode","navigator","userAgent","search","runtime","sendMessage","command","window_id","parentUpdate","inPopup","tabId","selectTo","windows","remove","c","r","random","v","toString","console","log","sessionName","sessionColor","session","windowsInfo","date","Date","now","sessionStartTime","uuidv4","customName","queryInfo","query","tabkey","newTab","get","sessions","catch","err","error","message","value","setTimeout","scrollTo","update","toggleColors","namebox","focus","a","target","arr","cnts","reduce","obj","val","sorted","Object","keys","sort","b","more","stopPropagation","React","Component"],"mappings":"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","file":"Window.js","sourcesContent":["\"use strict\";\n\nclass Window extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\tcolorActive: false,\n\t\t\twindowTitles: [],\n\t\t\tcolor: \"default\",\n\t\t\tname: \"\",\n\t\t\ttabs: 0,\n\t\t\thover: false\n\t\t};\n\n\t\tthis.addTab = this.addTab.bind(this);\n\t\tthis.changeColors = this.changeColors.bind(this);\n\t\tthis.changeName = this.changeName.bind(this);\n\t\tthis.checkKey = this.checkKey.bind(this);\n\t\tthis.closePopup = this.closePopup.bind(this);\n\t\tthis.close = this.close.bind(this);\n\t\tthis.colors = this.colors.bind(this);\n\t\tthis.dragOver = this.dragOver.bind(this);\n\t\tthis.dragLeave = this.dragLeave.bind(this);\n\t\tthis.drop = this.drop.bind(this);\n\t\tthis.maximize = this.maximize.bind(this);\n\t\tthis.minimize = this.minimize.bind(this);\n\t\tthis.save = this.save.bind(this);\n\t\tthis.stop = this.stop.bind(this);\n\t\tthis.windowClick = this.windowClick.bind(this);\n\t\tthis.selectToFromTab = this.selectToFromTab.bind(this);\n\t\tthis.hoverWindow = this.hoverWindow.bind(this);\n\t\tthis.hoverWindowOut = this.hoverWindowOut.bind(this);\n\t\tthis.checkSettings = this.checkSettings.bind(this);\n\t}\n\n\tasync componentDidMount() {\n\t\tawait this.checkSettings();\n\t}\n\n\tasync checkSettings() {\n\t\tvar colors = await getLocalStorage(\"windowColors\", {});\n\t\tvar color = colors[this.props.window.id] || \"default\";\n\n\t\tvar name = \"\";\n\t\tif (!!this.props.window.titlePreface) {\n\t\t\tname = this.props.window.titlePreface;\n\t\t} else {\n\t\t\tvar names = await getLocalStorage(\"windowNames\", {});\n\t\t\tif (typeof names !== 'object') {\n\t\t\t\tawait setLocalStorage(\"windowNames\", {});\n\t\t\t\tnames = {};\n\t\t\t}\n\t\t\tname = names[this.props.window.id] || \"\";\n\t\t}\n\n\t\tthis.setState({\n\t\t\tcolor: color,\n\t\t\tname: name\n\t\t});\n\t}\n\n\trender() {\n\t\tvar _this = this;\n\n\t\tvar color = this.state.color;\n\t\tvar name = this.state.name;\n\n\t\tvar hideWindow = true;\n\t\tvar titleAdded = false;\n\t\tvar tabsperrow = this.props.layout.indexOf(\"blocks\") > -1 ? Math.ceil(Math.sqrt(this.props.tabs.length + 2)) : this.props.layout == \"vertical\" ? 1 : 15;\n\t\tvar tabs = this.props.tabs.map(function(tab) {\n\t\t\tvar isHidden = !!_this.props.hiddenTabs[tab.id] && _this.props.filterTabs;\n\t\t\tvar isSelected = !!_this.props.selection[tab.id];\n\t\t\thideWindow &= isHidden;\n\t\t\treturn (\n\t\t\t\t<Tab\n\t\t\t\t\tkey={\"windowtab_\" + _this.props.window.id + \"_\" + tab.id}\n\t\t\t\t\twindow={_this.props.window}\n\t\t\t\t\tlayout={_this.props.layout}\n\t\t\t\t\ttab={tab}\n\t\t\t\t\tselected={isSelected}\n\t\t\t\t\thidden={isHidden}\n\t\t\t\t\tmiddleClick={_this.props.tabMiddleClick}\n\t\t\t\t\thoverHandler={_this.props.hoverHandler}\n\t\t\t\t\tsearchActive={_this.props.searchActive}\n\t\t\t\t\tselect={_this.props.select}\n\t\t\t\t\tselectTo={_this.selectToFromTab}\n\t\t\t\t\tdraggable={true}\n\t\t\t\t\tdrag={_this.props.drag}\n\t\t\t\t\tdrop={_this.props.drop}\n\t\t\t\t\tdropWindow={_this.props.dropWindow}\n\t\t\t\t\tdragFavicon={_this.props.dragFavicon}\n\t\t\t\t\tparentUpdate={_this.forceUpdate.bind(_this)}\n\t\t\t\t\tref={\"tab\" + tab.id}\n\t\t\t\t\tid={\"tab-\" + tab.id}\n\t\t\t\t/>\n\t\t\t);\n\t\t});\n\t\tif (!hideWindow) {\n\t\t\tif (!!this.props.tabactions) {\n\t\t\t\ttabs.push(\n\t\t\t\t\t<div key={\"windownl_\" + _this.props.window.id} className=\"newliner\" />,\n\t\t\t\t\t<div key={\"windowactions_\" + this.props.window.id} className=\"window-actions\">\n\t\t\t\t\t\t{this.props.sessionsFeature ? (\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclassName={\"icon tabaction save \" + (this.props.layout.indexOf(\"blocks\") > -1 ? \"\" : \"windowaction\")}\n\t\t\t\t\t\t\t\ttitle={\n\t\t\t\t\t\t\t\t\t\"Save this window for later\\nWill save \" +\n\t\t\t\t\t\t\t\t\ttabs.length +\n\t\t\t\t\t\t\t\t\t\" tabs with this window for later. Please note : The saved tabs will lose their history.\"\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tonClick={this.save}\n\t\t\t\t\t\t\t\tonMouseEnter={this.props.hoverIcon}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\tfalse\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclassName={\"icon tabaction add \" + (this.props.layout.indexOf(\"blocks\") > -1 ? \"\" : \"windowaction\")}\n\t\t\t\t\t\t\ttitle=\"Open a new tab\"\n\t\t\t\t\t\t\tonClick={this.addTab}\n\t\t\t\t\t\t\tonMouseEnter={this.props.hoverIcon}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclassName={\"icon tabaction colors \" + (this.props.layout.indexOf(\"blocks\") > -1 ? \"\" : \"windowaction\")}\n\t\t\t\t\t\t\ttitle=\"Change window name or color\"\n\t\t\t\t\t\t\tonClick={this.colors}\n\t\t\t\t\t\t\tonMouseEnter={this.props.hoverIcon}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t{this.props.window.state == \"minimized\" ? (\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclassName={\"icon tabaction maximize \" + (this.props.layout.indexOf(\"blocks\") > -1 ? \"\" : \"windowaction\")}\n\t\t\t\t\t\t\t\ttitle={\"Maximize this window\\nWill maximize \" + tabs.length + \" tabs\"}\n\t\t\t\t\t\t\t\tonClick={this.maximize}\n\t\t\t\t\t\t\t\tonMouseEnter={this.props.hoverIcon}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclassName={\"icon tabaction minimize \" + (this.props.layout.indexOf(\"blocks\") > -1 ? \"\" : \"windowaction\")}\n\t\t\t\t\t\t\t\ttitle={\"Minimize this window\\nWill minimize \" + tabs.length + \" tabs\"}\n\t\t\t\t\t\t\t\tonClick={this.minimize}\n\t\t\t\t\t\t\t\tonMouseEnter={this.props.hoverIcon}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclassName={\"icon tabaction close \" + (this.props.layout.indexOf(\"blocks\") > -1 ? \"\" : \"windowaction\")}\n\t\t\t\t\t\t\ttitle={\"Close this window\\nWill close \" + tabs.length + \" tabs\"}\n\t\t\t\t\t\t\tonClick={this.close}\n\t\t\t\t\t\t\tonMouseEnter={this.props.hoverIcon}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t);\n\t\t\t}\n\t\t\tif (this.state.colorActive) {\n\t\t\t\ttabs.push(\n\t\t\t\t\t<div key={\"windowcolors_\" + _this.props.window.id} className={\"window-colors \" + (this.state.colorActive ? \"\" : \"hidden\")} onClick={this.stop} onKeyDown={this.checkKey}>\n\t\t\t\t\t\t<h2 className=\"window-x\" onClick={this.closePopup}>\n\t\t\t\t\t\t\tx\n\t\t\t\t\t\t</h2>\n\t\t\t\t\t\t<h3 className=\"center\">Name the window</h3>\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\tclassName=\"window-name-input\"\n\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\tonChange={this.changeName}\n\t\t\t\t\t\t\tvalue={this.state.name}\n\t\t\t\t\t\t\tplaceholder={this.state.windowTitles ? this.topEntries(this.state.windowTitles).join(\"\") : \"Name window...\"}\n\t\t\t\t\t\t\ttabIndex=\"1\"\n\t\t\t\t\t\t\tref=\"namebox\"\n\t\t\t\t\t\t\tonKeyDown={this.checkKey}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<h3 className=\"center\">Pick a color</h3>\n\t\t\t\t\t\t<div className=\"colors-box\">\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclassName={\"icon tabaction default \" + (this.props.layout.indexOf(\"blocks\") > -1 ? \"\" : \"windowaction\")}\n\t\t\t\t\t\t\t\ttitle=\"Change background color\"\n\t\t\t\t\t\t\t\tonClick={this.changeColors.bind(this, { colorActive: false, color: \"default\" })}\n\t\t\t\t\t\t\t\tonMouseEnter={this.props.hoverIcon}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclassName={\"icon tabaction color1 \" + (this.props.layout.indexOf(\"blocks\") > -1 ? \"\" : \"windowaction\")}\n\t\t\t\t\t\t\t\ttitle=\"Change background color\"\n\t\t\t\t\t\t\t\tonClick={this.changeColors.bind(this, { colorActive: false, color: \"color1\" })}\n\t\t\t\t\t\t\t\tonMouseEnter={this.props.hoverIcon}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclassName={\"icon tabaction color2 \" + (this.props.layout.indexOf(\"blocks\") > -1 ? \"\" : \"windowaction\")}\n\t\t\t\t\t\t\t\ttitle=\"Change background color\"\n\t\t\t\t\t\t\t\tonClick={this.changeColors.bind(this, { colorActive: false, color: \"color2\" })}\n\t\t\t\t\t\t\t\tonMouseEnter={this.props.hoverIcon}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclassName={\"icon tabaction color3 \" + (this.props.layout.indexOf(\"blocks\") > -1 ? \"\" : \"windowaction\")}\n\t\t\t\t\t\t\t\ttitle=\"Change background color\"\n\t\t\t\t\t\t\t\tonClick={this.changeColors.bind(this, { colorActive: false, color: \"color3\" })}\n\t\t\t\t\t\t\t\tonMouseEnter={this.props.hoverIcon}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclassName={\"icon tabaction color4 \" + (this.props.layout.indexOf(\"blocks\") > -1 ? \"\" : \"windowaction\")}\n\t\t\t\t\t\t\t\ttitle=\"Change background color\"\n\t\t\t\t\t\t\t\tonClick={this.changeColors.bind(this, { colorActive: false, color: \"color4\" })}\n\t\t\t\t\t\t\t\tonMouseEnter={this.props.hoverIcon}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclassName={\"icon tabaction color5 \" + (this.props.layout.indexOf(\"blocks\") > -1 ? \"\" : \"windowaction\")}\n\t\t\t\t\t\t\t\ttitle=\"Change background color\"\n\t\t\t\t\t\t\t\tonClick={this.changeColors.bind(this, { colorActive: false, color: \"color5\" })}\n\t\t\t\t\t\t\t\tonMouseEnter={this.props.hoverIcon}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclassName={\"icon tabaction color6 \" + (this.props.layout.indexOf(\"blocks\") > -1 ? \"\" : \"windowaction\")}\n\t\t\t\t\t\t\t\ttitle=\"Change background color\"\n\t\t\t\t\t\t\t\tonClick={this.changeColors.bind(this, { colorActive: false, color: \"color6\" })}\n\t\t\t\t\t\t\t\tonMouseEnter={this.props.hoverIcon}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclassName={\"icon tabaction color7 \" + (this.props.layout.indexOf(\"blocks\") > -1 ? \"\" : \"windowaction\")}\n\t\t\t\t\t\t\t\ttitle=\"Change background color\"\n\t\t\t\t\t\t\t\tonClick={this.changeColors.bind(this, { colorActive: false, color: \"color7\" })}\n\t\t\t\t\t\t\t\tonMouseEnter={this.props.hoverIcon}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclassName={\"icon tabaction color8 \" + (this.props.layout.indexOf(\"blocks\") > -1 ? \"\" : \"windowaction\")}\n\t\t\t\t\t\t\t\ttitle=\"Change background color\"\n\t\t\t\t\t\t\t\tonClick={this.changeColors.bind(this, { colorActive: false, color: \"color8\" })}\n\t\t\t\t\t\t\t\tonMouseEnter={this.props.hoverIcon}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclassName={\"icon tabaction color9 \" + (this.props.layout.indexOf(\"blocks\") > -1 ? \"\" : \"windowaction\")}\n\t\t\t\t\t\t\t\ttitle=\"Change background color\"\n\t\t\t\t\t\t\t\tonClick={this.changeColors.bind(this, { colorActive: false, color: \"color9\" })}\n\t\t\t\t\t\t\t\tonMouseEnter={this.props.hoverIcon}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclassName={\"icon tabaction color10 \" + (this.props.layout.indexOf(\"blocks\") > -1 ? \"\" : \"windowaction\")}\n\t\t\t\t\t\t\t\ttitle=\"Change background color\"\n\t\t\t\t\t\t\t\tonClick={this.changeColors.bind(this, { colorActive: false, color: \"color10\" })}\n\t\t\t\t\t\t\t\tonMouseEnter={this.props.hoverIcon}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclassName={\"icon tabaction color11 \" + (this.props.layout.indexOf(\"blocks\") > -1 ? \"\" : \"windowaction\")}\n\t\t\t\t\t\t\t\ttitle=\"Change background color\"\n\t\t\t\t\t\t\t\tonClick={this.changeColors.bind(this, { colorActive: false, color: \"color11\" })}\n\t\t\t\t\t\t\t\tonMouseEnter={this.props.hoverIcon}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclassName={\"icon tabaction color12 \" + (this.props.layout.indexOf(\"blocks\") > -1 ? \"\" : \"windowaction\")}\n\t\t\t\t\t\t\t\ttitle=\"Change background color\"\n\t\t\t\t\t\t\t\tonClick={this.changeColors.bind(this, { colorActive: false, color: \"color12\" })}\n\t\t\t\t\t\t\t\tonMouseEnter={this.props.hoverIcon}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclassName={\"icon tabaction color13 \" + (this.props.layout.indexOf(\"blocks\") > -1 ? \"\" : \"windowaction\")}\n\t\t\t\t\t\t\t\ttitle=\"Change background color\"\n\t\t\t\t\t\t\t\tonClick={this.changeColors.bind(this, { colorActive: false, color: \"color13\" })}\n\t\t\t\t\t\t\t\tonMouseEnter={this.props.hoverIcon}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclassName={\"icon tabaction color14 \" + (this.props.layout.indexOf(\"blocks\") > -1 ? \"\" : \"windowaction\")}\n\t\t\t\t\t\t\t\ttitle=\"Change background color\"\n\t\t\t\t\t\t\t\tonClick={this.changeColors.bind(this, { colorActive: false, color: \"color14\" })}\n\t\t\t\t\t\t\t\tonMouseEnter={this.props.hoverIcon}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclassName={\"icon tabaction color15 \" + (this.props.layout.indexOf(\"blocks\") > -1 ? \"\" : \"windowaction\")}\n\t\t\t\t\t\t\t\ttitle=\"Change background color\"\n\t\t\t\t\t\t\t\tonClick={this.changeColors.bind(this, { colorActive: false, color: \"color15\" })}\n\t\t\t\t\t\t\t\tonMouseEnter={this.props.hoverIcon}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclassName={\"icon tabaction color16 \" + (this.props.layout.indexOf(\"blocks\") > -1 ? \"\" : \"windowaction\")}\n\t\t\t\t\t\t\t\ttitle=\"Change background color\"\n\t\t\t\t\t\t\t\tonClick={this.changeColors.bind(this, { colorActive: false, color: \"color16\" })}\n\t\t\t\t\t\t\t\tonMouseEnter={this.props.hoverIcon}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclassName={\"icon tabaction color17 \" + (this.props.layout.indexOf(\"blocks\") > -1 ? \"\" : \"windowaction\")}\n\t\t\t\t\t\t\t\ttitle=\"Change background color\"\n\t\t\t\t\t\t\t\tonClick={this.changeColors.bind(this, { colorActive: false, color: \"color17\" })}\n\t\t\t\t\t\t\t\tonMouseEnter={this.props.hoverIcon}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclassName={\"icon tabaction color18 \" + (this.props.layout.indexOf(\"blocks\") > -1 ? \"\" : \"windowaction\")}\n\t\t\t\t\t\t\t\ttitle=\"Change background color\"\n\t\t\t\t\t\t\t\tonClick={this.changeColors.bind(this, { colorActive: false, color: \"color18\" })}\n\t\t\t\t\t\t\t\tonMouseEnter={this.props.hoverIcon}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclassName={\"icon tabaction color19 \" + (this.props.layout.indexOf(\"blocks\") > -1 ? \"\" : \"windowaction\")}\n\t\t\t\t\t\t\t\ttitle=\"Change background color\"\n\t\t\t\t\t\t\t\tonClick={this.changeColors.bind(this, { colorActive: false, color: \"color19\" })}\n\t\t\t\t\t\t\t\tonMouseEnter={this.props.hoverIcon}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclassName={\"icon tabaction color20 \" + (this.props.layout.indexOf(\"blocks\") > -1 ? \"\" : \"windowaction\")}\n\t\t\t\t\t\t\t\ttitle=\"Change background color\"\n\t\t\t\t\t\t\t\tonClick={this.changeColors.bind(this, { colorActive: false, color: \"color20\" })}\n\t\t\t\t\t\t\t\tonMouseEnter={this.props.hoverIcon}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclassName={\"icon tabaction color21 \" + (this.props.layout.indexOf(\"blocks\") > -1 ? \"\" : \"windowaction\")}\n\t\t\t\t\t\t\t\ttitle=\"Change background color\"\n\t\t\t\t\t\t\t\tonClick={this.changeColors.bind(this, { colorActive: false, color: \"color21\" })}\n\t\t\t\t\t\t\t\tonMouseEnter={this.props.hoverIcon}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclassName={\"icon tabaction color22 \" + (this.props.layout.indexOf(\"blocks\") > -1 ? \"\" : \"windowaction\")}\n\t\t\t\t\t\t\t\ttitle=\"Change background color\"\n\t\t\t\t\t\t\t\tonClick={this.changeColors.bind(this, { colorActive: false, color: \"color22\" })}\n\t\t\t\t\t\t\t\tonMouseEnter={this.props.hoverIcon}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclassName={\"icon tabaction color23 \" + (this.props.layout.indexOf(\"blocks\") > -1 ? \"\" : \"windowaction\")}\n\t\t\t\t\t\t\t\ttitle=\"Change background color\"\n\t\t\t\t\t\t\t\tonClick={this.changeColors.bind(this, { colorActive: false, color: \"color23\" })}\n\t\t\t\t\t\t\t\tonMouseEnter={this.props.hoverIcon}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclassName={\"icon tabaction color24 \" + (this.props.layout.indexOf(\"blocks\") > -1 ? \"\" : \"windowaction\")}\n\t\t\t\t\t\t\t\ttitle=\"Change background color\"\n\t\t\t\t\t\t\t\tonClick={this.changeColors.bind(this, { colorActive: false, color: \"color24\" })}\n\t\t\t\t\t\t\t\tonMouseEnter={this.props.hoverIcon}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclassName={\"icon tabaction color25 \" + (this.props.layout.indexOf(\"blocks\") > -1 ? \"\" : \"windowaction\")}\n\t\t\t\t\t\t\t\ttitle=\"Change background color\"\n\t\t\t\t\t\t\t\tonClick={this.changeColors.bind(this, { colorActive: false, color: \"color25\" })}\n\t\t\t\t\t\t\t\tonMouseEnter={this.props.hoverIcon}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tif (this.props.windowTitles) {\n\t\t\t\tif (!!name) {\n\t\t\t\t\ttabs.unshift(\n\t\t\t\t\t\t<h3\n\t\t\t\t\t\t\tkey={\"window-\" + this.props.window.id + \"-windowTitle\"}\n\t\t\t\t\t\t\tclassName=\"editName center windowTitle\"\n\t\t\t\t\t\t\tonClick={this.colors}\n\t\t\t\t\t\t\ttitle=\"Change the name of this window\"\n\t\t\t\t\t\t\tonMouseEnter={this.props.hoverIcon}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{name}\n\t\t\t\t\t\t</h3>\n\t\t\t\t\t);\n\t\t\t\t\ttitleAdded = true;\n\t\t\t\t} else {\n\t\t\t\t\tif (this.state.windowTitles.length == 0 || this.state.tabs != tabs.length + this.props.window.id * 99) {\n\t\t\t\t\t\tthis.state.windowTitles = [];\n\t\t\t\t\t\tthis.state.tabs = tabs.length + this.props.window.id * 99;\n\t\t\t\t\t\tfor (var i = 0; i < tabs.length; i++) {\n\n\t\t\t\t\t\t\tif (!!tabs[i].props && !!tabs[i].props.tab && !!tabs[i].props.tab.url) {\n\t\t\t\t\t\t\t\tvar url = new URL(tabs[i].props.tab.url);\n\t\t\t\t\t\t\t\tvar protocol = url.protocol || \"\";\n\t\t\t\t\t\t\t\tvar hostname = url.hostname || \"\";\n\t\t\t\t\t\t\t\tif (protocol.indexOf(\"view-source\") > -1 && !!url.pathname) {\n\t\t\t\t\t\t\t\t\turl = new URL(url.pathname);\n\t\t\t\t\t\t\t\t\thostname = url.hostname || \"source\";\n\t\t\t\t\t\t\t\t} else if (protocol.indexOf(\"chrome-extension\") > -1) {\n\t\t\t\t\t\t\t\t\thostname = tabs[i].props.tab.title || \"extension\";\n\t\t\t\t\t\t\t\t} else if (protocol.indexOf(\"about\") > -1) {\n\t\t\t\t\t\t\t\t\thostname = tabs[i].props.tab.title || \"about\";\n\t\t\t\t\t\t\t\t} else if (hostname.indexOf(\"mail.google\") > -1) {\n\t\t\t\t\t\t\t\t\thostname = \"gmail\";\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tif (!hostname) hostname = \"\";\n\t\t\t\t\t\t\t\t\thostname = hostname.replace(\"www.\", \"\");\n\t\t\t\t\t\t\t\t\tvar regex_var = new RegExp(/(\\.[^\\.]{0,2})(\\.[^\\.]{0,2})(\\.*$)|(\\.[^\\.]*)(\\.*$)/);\n\t\t\t\t\t\t\t\t\thostname = hostname\n\t\t\t\t\t\t\t\t\t\t.replace(regex_var, \"\")\n\t\t\t\t\t\t\t\t\t\t.split(\".\")\n\t\t\t\t\t\t\t\t\t\t.pop();\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tif (!!hostname && hostname.length > 18) {\n\t\t\t\t\t\t\t\t\thostname = tabs[i].props.tab.title || \"\";\n\n\t\t\t\t\t\t\t\t\twhile (hostname.length > 18 && hostname.indexOf(\"—\") > -1) {\n\t\t\t\t\t\t\t\t\t\thostname = hostname.split(\"—\");\n\t\t\t\t\t\t\t\t\t\thostname.pop();\n\t\t\t\t\t\t\t\t\t\thostname = hostname.join(\"—\");\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\twhile (hostname.length > 18 && hostname.indexOf(\"-\") > -1) {\n\t\t\t\t\t\t\t\t\t\thostname = hostname.split(\"-\");\n\t\t\t\t\t\t\t\t\t\thostname.pop();\n\t\t\t\t\t\t\t\t\t\thostname = hostname.join(\"-\");\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\twhile (hostname.length > 18 && hostname.indexOf(\" \") > -1) {\n\t\t\t\t\t\t\t\t\t\thostname = hostname.split(\" \");\n\t\t\t\t\t\t\t\t\t\thostname.pop();\n\t\t\t\t\t\t\t\t\t\thostname = hostname.join(\" \");\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tthis.state.windowTitles.push(hostname);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (this.state.windowTitles.length > 0) {\n\t\t\t\t\t\ttabs.unshift(\n\t\t\t\t\t\t\t<h3\n\t\t\t\t\t\t\t\tkey={\"window-\" + this.props.window.id + \"-windowTitle\"}\n\t\t\t\t\t\t\t\tclassName=\"editName center windowTitle\"\n\t\t\t\t\t\t\t\tonClick={this.colors}\n\t\t\t\t\t\t\t\ttitle=\"Change the name of this window\"\n\t\t\t\t\t\t\t\tonMouseEnter={this.props.hoverIcon}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{this.topEntries(this.state.windowTitles).join(\"\")}\n\t\t\t\t\t\t\t</h3>\n\t\t\t\t\t\t);\n\t\t\t\t\t\ttitleAdded = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (tabsperrow < 5) {\n\t\t\t\ttabsperrow = 5;\n\t\t\t}\n\t\t\tvar children = [];\n\t\t\tif (!!titleAdded) {\n\t\t\t\tchildren.push(tabs.shift());\n\t\t\t}\n\t\t\tvar z = -1;\n\t\t\tfor (var j = 0; j < tabs.length; j++) {\n\t\t\t\tvar tab = tabs[j].props.tab;\n\t\t\t\tvar isHidden = !!tab && !!tab.id && !!this.props.hiddenTabs[tab.id] && this.props.filterTabs;\n\t\t\t\tif(!isHidden) {\n\t\t\t\t\tz++;\n\t\t\t\t\tchildren.push(tabs[j]);\n\t\t\t\t}\n\t\t\t\tif ((z + 1) % tabsperrow == 0 && z && this.props.layout.indexOf(\"blocks\") > -1) {\n\t\t\t\t\tchildren.push(<div className=\"newliner\" key={\"windownlz_\" + _this.props.window.id + \"_\" + z} />);\n\t\t\t\t}\n\t\t\t}\n\t\t\tvar focused = false;\n\t\t\tif (this.props.window.focused || this.props.lastOpenWindow == this.props.window.id) {\n\t\t\t\tfocused = true;\n\t\t\t}\n\t\t\treturn (\n\t\t\t\t<div\n\t\t\t\t\tkey={\"window-\" + this.props.window.id}\n\t\t\t\t\tid={\"window-\" + this.props.window.id}\n\t\t\t\t\tclassName={\n\t\t\t\t\t\t\"window \" +\n\t\t\t\t\t\tthis.props.window.state +\n\t\t\t\t\t\t\" window-\" +\n\t\t\t\t\t\tthis.props.window.id +\n\t\t\t\t\t\t\" \" +\n\t\t\t\t\t\t(focused ? \"activeWindow\" : \"\") +\n\t\t\t\t\t\t\" \" +\n\t\t\t\t\t\tthis.state.color +\n\t\t\t\t\t\t\" \" +\n\t\t\t\t\t\t(this.props.layout.indexOf(\"blocks\") > -1 ? \"block\" : \"\") +\n\t\t\t\t\t\t\" \" +\n\t\t\t\t\t\tthis.props.layout +\n\t\t\t\t\t\t\" \" +\n\t\t\t\t\t\t(this.props.window.incognito ? \" incognito\" : \"\") +\n\t\t\t\t\t\t\" \" +\n\t\t\t\t\t\t(focused ? \" focused\" : \"\")\n\t\t\t\t\t}\n\t\t\t\t\tonDragEnter={this.dragOver}\n\t\t\t\t\tonDragOver={this.dragOver}\n\t\t\t\t\tonDragLeave={this.dragLeave}\n\t\t\t\t\tonClick={this.windowClick}\n\t\t\t\t\ttitle={\"\"}\n\t\t\t\t\tonMouseEnter={this.hoverWindow.bind(null, tabs)}\n\t\t\t\t\tonMouseLeave={this.hoverWindowOut}\n\t\t\t\t\tonDrop={this.drop}\n\t\t\t\t>\n\t\t\t\t\t<div key={\"windowcontainer_\" + this.props.window.id} className=\"windowcontainer\" title={\"Focus this window\\nWill select this window with \" + tabs.length + \" tabs\"}>{children}</div>\n\t\t\t\t</div>\n\t\t\t);\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t}\n\tstop(e) {\n\t\tthis.stopProp(e);\n\t}\n\taddTab(e) {\n\t\tthis.stopProp(e);\n\t\tbrowser.tabs.create({ windowId: this.props.window.id });\n\t}\n\tdragOver(e) {\n\t\tthis.state.hover = true;\n\t\tthis.stopProp(e);\n\t}\n\tdragLeave(e) {\n\t\tthis.state.hover = false;\n\t\te.nativeEvent.preventDefault();\n\t}\n\tdrop(e) {\n\t\tvar distance = 1000000;\n\t\tvar closestTab = null;\n\t\tvar closestRef = null;\n\n\t\tfor (var i = 0; i < this.props.tabs.length; i++) {\n\t\t\tvar tab = this.props.tabs[i];\n\t\t\tvar tabRef = this.refs[\"tab\" + tab.id].tabRef.current;\n\t\t\tvar tabRect = tabRef.getBoundingClientRect();\n\t\t\tvar x = e.nativeEvent.clientX;\n\t\t\tvar y = e.nativeEvent.clientY;\n\t\t\tvar dx = tabRect.x - x;\n\t\t\tvar dy = tabRect.y - y;\n\t\t\tvar d = Math.sqrt(dx * dx + dy * dy);\n\t\t\tif (d < distance) {\n\t\t\t\tdistance = d;\n\t\t\t\tclosestTab = tab.id;\n\t\t\t\tclosestRef = tabRef;\n\t\t\t}\n\t\t}\n\n\t\tthis.stopProp(e);\n\n\t\tif (closestTab != null) {\n\t\t\tvar before = null;\n\t\t\tvar boundingRect = closestRef.getBoundingClientRect();\n\t\t\tif (this.props.layout == \"vertical\") {\n\t\t\t\tbefore = e.nativeEvent.clientY < boundingRect.top ? true : false;\n\t\t\t} else {\n\t\t\t\tbefore = e.nativeEvent.clientX < boundingRect.left ? true : false;\n\t\t\t}\n\t\t\tthis.props.drop(closestTab, before);\n\t\t} else {\n\t\t\tthis.props.dropWindow(this.props.window.id);\n\t\t}\n\t}\n\thoverWindow(tabs, e) {\n\t\tthis.state.hover = true;\n\t\tthis.props.hoverIcon(\"Focus this window\\nWill select this window with \" + tabs.length + \" tabs\");\n\t\t// this.props.hoverIcon(e);\n\t}\n\thoverWindowOut(e) {\n\t\tthis.state.hover = false;\n\t}\n\tcheckKey(e) {\n\t\t// close popup when enter or escape have been pressed\n\t\tif (e.keyCode == 13 || e.keyCode == 27) {\n\t\t\tthis.stopProp(e);\n\t\t\tthis.closePopup();\n\t\t}\n\t}\n\tasync windowClick(e) {\n\t\tthis.stopProp(e);\n\n\t\tvar windowId = this.props.window.id;\n\n\t\tif (navigator.userAgent.search(\"Firefox\") > -1) {\n\t\t\tbrowser.runtime.sendMessage({command: \"focus_on_window_delayed\", window_id: windowId});\n\t\t} else {\n\t\t\tbrowser.runtime.sendMessage({command: \"focus_on_window\", window_id: windowId});\n\t\t}\n\n\t\tthis.props.parentUpdate();\n\t\tif (!!window.inPopup) window.close();\n\t\treturn false;\n\t}\n\tselectToFromTab(tabId) {\n\t\tif(tabId) this.props.selectTo(tabId, this.props.tabs);\n\t}\n\tasync close(e) {\n\t\tthis.stopProp(e);\n\t\tawait browser.windows.remove(this.props.window.id);\n\t}\n\tuuidv4() {\n\t\treturn \"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx\".replace(/[xy]/g, function(c) {\n\t\t\tvar r = (Math.random() * 16) | 0,\n\t\t\t\tv = c == \"x\" ? r : (r & 0x3) | 0x8;\n\t\t\treturn v.toString(16);\n\t\t});\n\t}\n\tasync save(e) {\n\t\tthis.stopProp(e);\n\n\t\tconsole.log(\"session name\", this.state.name);\n\t\tvar sessionName = this.state.name || this.topEntries(this.state.windowTitles).join(\"\");\n\t\tvar sessionColor = this.state.color || \"default\";\n\n\t\tconsole.log(\"session name\", sessionName);\n\n\t\tvar session = {\n\t\t\ttabs: [],\n\t\t\twindowsInfo: {},\n\t\t\tname: sessionName,\n\t\t\tcolor: sessionColor,\n\t\t\tdate: Date.now(),\n\t\t\tsessionStartTime: Date.now(),\n\t\t\tid: this.uuidv4()\n\t\t};\n\n\t\tif (this.state.name) {\n\t\t\tsession.customName = true;\n\t\t}\n\n\t\tvar queryInfo = {};\n\t\t//queryInfo.currentWindow = true;\n\t\tqueryInfo.windowId = this.props.window.id;\n\t\tconsole.log(queryInfo);\n\n\t\tvar tabs = await browser.tabs.query(queryInfo);\n\t\tconsole.log(tabs);\n\t\tfor (var tabkey in tabs) {\n\t\t\tif (navigator.userAgent.search(\"Firefox\") > -1) {\n\t\t\t\tvar newTab = tabs[tabkey];\n\t\t\t\tif (!!newTab.url && newTab.url.search(\"about:\") > -1) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t}\n\t\t\tsession.tabs.push(tabs[tabkey]);\n\t\t}\n\t\tconsole.log(session.tabs);\n\t\tsession.windowsInfo = await browser.windows.get(this.props.window.id);\n\n\t\tconsole.log(session);\n\n\t\tvar sessions = await getLocalStorage('sessions', {});\n\t\tsessions[session.id] = session;\n\n\t\tvar value = await setLocalStorage('sessions', sessions).catch(function(err) {\n\t\t\tconsole.log(err);\n\t\t\tconsole.error(err.message);\n\t\t});\n\t\tthis.props.parentUpdate();\n\t\tconsole.log(\"Value is set to \" + value);\n\n\t\tsetTimeout(function() {\n\t\t\tthis.props.scrollTo(\"session\", session.id);\n\t\t}.bind(this), 150);\n\t}\n\tasync minimize(e) {\n\t\tthis.stopProp(e);\n\t\tawait browser.windows.update(this.props.window.id, {\n\t\t\tstate: \"minimized\"\n\t\t});\n\t\tthis.props.parentUpdate();\n\t}\n\tasync maximize(e) {\n\t\tthis.stopProp(e);\n\t\tawait browser.windows.update(this.props.window.id, {\n\t\t\tstate: \"normal\"\n\t\t});\n\t\tthis.props.parentUpdate();\n\t}\n\tcolors(e) {\n\t\tthis.stopProp(e);\n\t\tthis.props.toggleColors(!this.state.colorActive, this.props.window.id);\n\t\tthis.setState({\n\t\t\tcolorActive: !this.state.colorActive\n\t\t});\n\t\tsetTimeout(function() {\n\t\t\tif(this.state.colorActive) {\n\t\t\t\tthis.refs.namebox.focus();\n\t\t\t}\n\t\t}.bind(this), 150);\n\t}\n\tasync changeColors(a) {\n\t\tthis.setState(a);\n\t\tthis.props.toggleColors(!this.state.colorActive, this.props.window.id);\n\n\t\tvar color = a.color || \"default\";\n\n\t\tbrowser.runtime.sendMessage({\n\t\t\tcommand: \"set_window_color\",\n\t\t\twindow_id: this.props.window.id,\n\t\t\tcolor: color\n\t\t});\n\n\t\tthis.state.color = color;\n\t\tthis.setState({\n\t\t\tcolor: color\n\t\t});\n\t\tthis.closePopup();\n\t}\n\tclosePopup() {\n\t\tthis.props.toggleColors(!this.state.colorActive, this.props.window.id);\n\t\tthis.setState({\n\t\t\tcolorActive: !this.state.colorActive\n\t\t});\n\t\tthis.props.parentUpdate();\n\t}\n\tasync changeName(e) {\n\t\t// this.setState(a);\n\t\tvar name = \"\";\n\t\tif(e && e.target && e.target.value) name = e.target.value;\n\n\t\tbrowser.runtime.sendMessage({\n\t\t\tcommand: \"set_window_name\",\n\t\t\twindow_id: this.props.window.id,\n\t\t\tname: name\n\t\t});\n\n\t\tthis.state.name = name;\n\t\tthis.setState({\n\t\t\tname: name\n\t\t});\n\t\tif (navigator.userAgent.search(\"Firefox\") > -1) {\n\t\t\tif(!!name) {\n\t\t\t\tawait browser.windows.update(this.props.window.id, {\n\t\t\t\t\ttitlePreface: name + \" - \"\n\t\t\t\t});\n\t\t\t}else{\n\t\t\t\tawait browser.windows.update(this.props.window.id, {\n\t\t\t\t\ttitlePreface: name\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\ttopEntries(arr) {\n\t\tvar cnts = arr.reduce(function(obj, val) {\n\t\t\tobj[val] = (obj[val] || 0) + 1;\n\t\t\treturn obj;\n\t\t}, {});\n\t\tvar sorted = Object.keys(cnts).sort(function(a, b) {\n\t\t\treturn cnts[b] - cnts[a];\n\t\t});\n\n\t\tvar more = 0;\n\t\tif (sorted.length == 3) {\n\t\t} else {\n\t\t\twhile (sorted.length > 2) {\n\t\t\t\tsorted.pop();\n\t\t\t\tmore++;\n\t\t\t}\n\t\t}\n\t\tfor (var i = 0; i < sorted.length; i++) {\n\t\t\tif (i > 0) {\n\t\t\t\tsorted[i] = \", \" + sorted[i];\n\t\t\t}\n\t\t}\n\t\tif (more > 0) {\n\t\t\tsorted.push(\" & \" + more + \" more\");\n\t\t}\n\t\treturn sorted;\n\t}\n\tstopProp(e) {\n\t\tif(e && e.nativeEvent) {\n\t\t\te.nativeEvent.preventDefault();\n\t\t\te.nativeEvent.stopPropagation();\n\t\t}\n\t\tif(e && e.preventDefault) {\n\t\t\te.preventDefault();\n\t\t\te.stopPropagation();\n\t\t}\n\t}\n}\n"]}